import React, { useState, useEffect } from 'react';
import { User, Plus, Save, X } from 'lucide-react';

const FavoritesTracker = () => {
  const initialData = {
    "Joslyn": {
      "Sweet Snack": { answer: "anything reese, siete cinna churo chips, danishes", notes: "Shellfish, dairy and sometimes gluten" },
      "Salty Snack": { answer: "Love chips and trying new flavors, but I stay in the realm of dill pickle, salt & vinegar, or anything tangy.", notes: "Shellfish, dairy and sometimes gluten" },
      "Books": { answer: "Open minded - I like informative womens health books, cooking or baking books, cheesy rom com esq books too." },
      "Color": { answer: "Blue or yellow" },
      "Drink": { answer: "water, cold pressed juice or anything fun as long as its not loaded with a ton of sugar", dislike: "soda" },
      "Restaurant": { answer: "Honey Grow, Cava, Tropical Smoothie or anything locally sourced or farm to table" },
      "Cake": { answer: "A plain yellow cake with chocolate frosting but I also like peanutbutter", dislike: "Tres leche, anything wet, don't care for coconut in cake" },
      "Sports Team": { answer: "N/A" },
      "Hobbies": { answer: "Watching tv, lol. Sometimes I like to do creative things but i'm not that good at it - but I try and trying new food." },
      "Stores": { answer: "Uh, I don't like to shop but I like to grocery shop." },
      "Scent": { answer: "N/A - Don't do fragrances" },
      "Starbucks Drink": { answer: "An Hazelnut oatmilk shaken espresso with a pump of mocha but if I'm avoiding coffee at the time then a dragon drink", notes: "Shouldn't be drinking coffee but its yummy lol." },
      "Boba": { answer: "Cocoa cream wow from kungfu or any black tea with milk and brown sugar boba 1/2 sweet" },
      "TV Show": { answer: "All the sappy and drama shows. Love is blind, love island, blood and water, grey's.." },
      "Gift Card": { answer: "Amazon or Wawa" },
      "Body Wash": { answer: "Kirk's 3 in 1 fragrance free or Dr. Bronners unscented", dislike: "no bath bombs" },
      "Hair Care": { answer: "Innersense, camile rose or AG care" },
      "Skin Care": { answer: "I usually get stuff from my esthetician, and the brand is Le Mieux. But if I stop into Ulta or Sephora, I'm grabbing Dermalogica or La Roche-Posay.", dislike: "Heavy scents no makeup" },
      "Anime/Cartoon": { answer: "N/A" },
      "Activity": { answer: "I'm in my self care era so I love massages, pedicures, facials but I also like exploring new cities, going to museums and sightseeing.", notes: "eyebrow threading, get hair done, car detailed, massage, facials" }
    },
    "Solmary": {
      "Sweet Snack": { answer: "Gummy bears, peach rings, dark chocolate kit kat, life savers gummies sour, sour mike and ikes", dislike: "Cheese/dairy :(" },
      "Salty Snack": { answer: "Hot Onion rings, beef sticks, salt and vinegar chips", notes: "Beef sticks from corner store are fireeeee" },
      "Books": { answer: "Philosophy, Psychology, Medical" },
      "Color": { answer: "Sage green, forest green, lavender" },
      "Drink": { answer: "Sweet tea, lemonade, seltzers", dislike: "soda" },
      "Restaurant": { answer: "Ramen restaurants, Chilis, Seafood Boil restaurants" },
      "Cake": { answer: "Red Velvet" },
      "Sports Team": { answer: "Baltimore Ravens" },
      "Hobbies": { answer: "Paint, Dance, Draw, craft, longboard", notes: "I needs a new longboard and acrylic and watercolor paint" },
      "Stores": { answer: "Hobby Lobby, BAM, Build a bear, Amazon, Michaels" },
      "Scent": { answer: "vanilla, rose" },
      "Starbucks Drink": { answer: "Matcha latte with almond milk" },
      "Boba": { answer: "" },
      "TV Show": { answer: "" },
      "Gift Card": { answer: "Amazon" },
      "Body Wash": { answer: "Aveeno or Dove" },
      "Hair Care": { answer: "" },
      "Skin Care": { answer: "Need new sunscreen" },
      "Anime/Cartoon": { answer: "Avatar the last airbender" },
      "Activity": { answer: "Arcade games, painting" }
    },
    "Ola": {
      "Sweet Snack": { answer: "Blueberry Muffin", dislike: "Dying Young", notes: "Find Healthy Alternative, Dairy" },
      "Salty Snack": { answer: "N/A" },
      "Books": { answer: "Self-Help/Business" },
      "Color": { answer: "Blue" },
      "Drink": { answer: "Water" },
      "Restaurant": { answer: "Asian/Mediterranean", notes: "Needs to be at least 4.5 Stars" },
      "Cake": { answer: "Tres Leches", dislike: "Dying Young" },
      "Sports Team": { answer: "None" },
      "Hobbies": { answer: "Action Sports/Something Thrilling" },
      "Stores": { answer: "B&H | Adorama | Best Buy", notes: "Be Rich" },
      "Scent": { answer: "Don't like Fragrance", dislike: "Dying Young" },
      "Starbucks Drink": { answer: "No Drinks", dislike: "Dying Young" },
      "Boba": { answer: "Brown Sugar with Oreo", dislike: "Dying Young", notes: "No Dairy- No sugar" },
      "TV Show": { answer: "N/A" },
      "Gift Card": { answer: "N/A" },
      "Body Wash": { answer: "No Fragrance", dislike: "Dying Young" },
      "Hair Care": { answer: "Anything that make my hair soft" },
      "Skin Care": { answer: "Anything that makes my skin soft" },
      "Anime/Cartoon": { answer: "Tokyo Revengers | Jujutsu Kaisen | My Hero Academia | Solo Leveling" },
      "Activity": { answer: "Action Sports - Snowboarding|Skateboarding|JetSkiing|Ziplining" }
    }
  };

  const [data, setData] = useState(initialData);
  const [selectedPerson, setSelectedPerson] = useState("Joslyn");
  const [selectedCategory, setSelectedCategory] = useState("Sweet Snack");
  const [showAddForm, setShowAddForm] = useState(false);
  const [newEntry, setNewEntry] = useState({ person: "", category: "", answer: "", dislike: "", notes: "" });

  const categories = [
    "Sweet Snack", "Salty Snack", "Books", "Color", "Drink", "Restaurant",
    "Cake", "Sports Team", "Hobbies", "Stores", "Scent", "Starbucks Drink",
    "Boba", "TV Show", "Gift Card", "Body Wash", "Hair Care", "Skin Care",
    "Anime/Cartoon", "Activity"
  ];

  const handleAddEntry = () => {
    if (!newEntry.person || !newEntry.category || !newEntry.answer) return;
    
    const updatedData = { ...data };
    if (!updatedData[newEntry.person]) {
      updatedData[newEntry.person] = {};
    }
    
    updatedData[newEntry.person][newEntry.category] = {
      answer: newEntry.answer,
      dislike: newEntry.dislike,
      notes: newEntry.notes
    };
    
    setData(updatedData);
    setNewEntry({ person: "", category: "", answer: "", dislike: "", notes: "" });
    setShowAddForm(false);
  };

  const currentData = data[selectedPerson]?.[selectedCategory] || { answer: "No data available" };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-yellow-50 to-purple-50 p-8">
      <div className="max-w-4xl mx-auto">
        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden">
          {/* Header */}
          <div className="bg-gradient-to-r from-blue-600 to-purple-600 p-8 text-white">
            <h1 className="text-4xl font-bold mb-2 flex items-center gap-3">
              <User className="w-10 h-10" />
              Favorites Tracker
            </h1>
            <p className="text-blue-100">Discover everyone's favorite things!</p>
          </div>

          {/* Controls */}
          <div className="p-8 space-y-6">
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-semibold text-gray-700 mb-2">Select Person</label>
                <select
                  value={selectedPerson}
                  onChange={(e) => setSelectedPerson(e.target.value)}
                  className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors bg-white text-gray-800"
                >
                  {Object.keys(data).map(person => (
                    <option key={person} value={person}>{person}</option>
                  ))}
                </select>
              </div>

              <div>
                <label className="block text-sm font-semibold text-gray-700 mb-2">Select Category</label>
                <select
                  value={selectedCategory}
                  onChange={(e) => setSelectedCategory(e.target.value)}
                  className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-colors bg-white text-gray-800"
                >
                  {categories.map(cat => (
                    <option key={cat} value={cat}>{cat}</option>
                  ))}
                </select>
              </div>
            </div>

            {/* Display Current Selection */}
            <div className="bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-6 space-y-4">
              <div className="flex items-center justify-between">
                <h2 className="text-2xl font-bold text-gray-800">{selectedPerson}'s {selectedCategory}</h2>
              </div>
              
              <div className="space-y-3">
                <div className="bg-white rounded-xl p-4 shadow-sm">
                  <p className="text-sm font-semibold text-blue-600 mb-1">Answer:</p>
                  <p className="text-gray-800">{currentData.answer || "N/A"}</p>
                </div>
                
                {currentData.dislike && (
                  <div className="bg-red-50 rounded-xl p-4 shadow-sm">
                    <p className="text-sm font-semibold text-red-600 mb-1">Dislikes:</p>
                    <p className="text-gray-800">{currentData.dislike}</p>
                  </div>
                )}
                
                {currentData.notes && (
                  <div className="bg-yellow-50 rounded-xl p-4 shadow-sm">
                    <p className="text-sm font-semibold text-yellow-700 mb-1">Notes:</p>
                    <p className="text-gray-800">{currentData.notes}</p>
                  </div>
                )}
              </div>
            </div>

            {/* Add New Entry Button */}
            <button
              onClick={() => setShowAddForm(!showAddForm)}
              className="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all flex items-center justify-center gap-2 shadow-lg"
            >
              {showAddForm ? <X className="w-5 h-5" /> : <Plus className="w-5 h-5" />}
              {showAddForm ? "Cancel" : "Add New Entry"}
            </button>

            {/* Add Form */}
            {showAddForm && (
              <div className="bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-6 space-y-4">
                <h3 className="text-xl font-bold text-gray-800 mb-4">Add New Entry</h3>
                
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">Person Name</label>
                  <input
                    type="text"
                    value={newEntry.person}
                    onChange={(e) => setNewEntry({ ...newEntry, person: e.target.value })}
                    placeholder="Enter name"
                    className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors"
                  />
                </div>

                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">Category</label>
                  <select
                    value={newEntry.category}
                    onChange={(e) => setNewEntry({ ...newEntry, category: e.target.value })}
                    className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors bg-white"
                  >
                    <option value="">Select category</option>
                    {categories.map(cat => (
                      <option key={cat} value={cat}>{cat}</option>
                    ))}
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">Answer</label>
                  <textarea
                    value={newEntry.answer}
                    onChange={(e) => setNewEntry({ ...newEntry, answer: e.target.value })}
                    placeholder="Enter favorite"
                    className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:outline-none transition-colors resize-none"
                    rows="3"
                  />
                </div>

                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">Dislikes (optional)</label>
                  <input
                    type="text"
                    value={newEntry.dislike}
                    onChange={(e) => setNewEntry({ ...newEntry, dislike: e.target.value })}
                    placeholder="Enter dislikes"
                    className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:outline-none transition-colors"
                  />
                </div>

                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">Notes (optional)</label>
                  <input
                    type="text"
                    value={newEntry.notes}
                    onChange={(e) => setNewEntry({ ...newEntry, notes: e.target.value })}
                    placeholder="Enter additional notes"
                    className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-yellow-500 focus:outline-none transition-colors"
                  />
                </div>

                <button
                  onClick={handleAddEntry}
                  className="w-full py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-xl font-semibold hover:from-green-700 hover:to-teal-700 transition-all flex items-center justify-center gap-2 shadow-lg"
                >
                  <Save className="w-5 h-5" />
                  Save Entry
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default FavoritesTracker;
